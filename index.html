<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é›²äº•é³´è¨ºæ–­ï½œ24å•/60å•ãƒ»æ—¥æœ¬èªãƒãƒƒãƒ—ç‰ˆ</title>
  <style>
    :root {
      --bg: linear-gradient(180deg,#f6f9ff,#ffffff);
      --fg: #0f172a;
      --muted: #475569;
      --brand: #8f82bc;   /* ç´« */
      --accent: #6ec5ff;  /* æ°´è‰² */
      --card: #ffffff;
      --border: #e2e8f0;
      --warn: #dc2626;
    }
    * { box-sizing: border-box }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--fg);
      background: var(--bg);
      line-height: 1.6;
    }
    .wrap { max-width: 920px; margin: 0 auto; padding: 16px 16px 96px }
    header {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      justify-content: space-between;
      margin: 12px 0 20px;
    }
    h1 {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(90deg, var(--brand), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0 0 6px;
    }
    .muted { color: var(--muted); font-size: 13px }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.08);
      overflow: hidden;
    }
    .card.pad { padding: 20px }
    .title { font-size: 16px; font-weight: 700; margin: 0 0 6px }
    .progress { height: 10px; background: #e5e7eb; border-radius: 999px; overflow: hidden }
    .progress > div {
      height: 100%;
      background: linear-gradient(90deg, var(--brand), var(--accent));
      width: 0%;
      transition: width 0.3s ease;
    }
    .q { padding: 16px 18px; border-top: 1px solid var(--border) }
    .q:first-child { border-top: none }
    .qtitle { font-size: 15px; margin: 0 0 12px; line-height: 1.6 }
    .slider { display: flex; align-items: center; gap: 8px }
    input[type=range] {
      width: 100%;
      height: 36px;
      accent-color: var(--brand);
    }
    .btn {
      appearance: none;
      border: none;
      background: var(--brand);
      color: #fff;
      padding: 10px 16px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .btn:hover { opacity: 0.9 }
    .btn.ghost {
      background: #fff;
      color: var(--brand);
      border: 1px solid var(--brand);
    }
    .btn.ghost:hover { background: #f1f5f9 }
    .footer {
      position: fixed;
      left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.98);
      border-top: 1px solid var(--border);
      backdrop-filter: saturate(180%) blur(10px);
    }
    .footer .inner {
      max-width: 920px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
    }
    .result {
      padding: 24px;
      border-radius: 18px;
      background: #fff;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      line-height: 1.7;
    }
    .result h2 { font-size: 24px; margin: 0 0 12px; }
    .result h3 { margin-top: 18px; font-size: 18px; border-left: 4px solid var(--brand); padding-left: 8px; }
    .badge {
      display: inline-block;
      background: #eef2ff;
      color: #3730a3;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      margin-right: 6px;
    }
    .result ul li::before { content: "âœ” "; color: var(--brand); font-weight: bold; }
    ul { margin: 6px 0 10px 20px }
    .disclaimer { font-size: 12px; color: var(--muted) }
    .warn {
      color: var(--warn);
      background: #fee2e2;
      padding: 10px 14px;
      border-radius: 10px;
      margin-top: 10px;
      font-weight: 600;
    }
    #progressCard {
      position: sticky; top: 0; z-index: 50;
      background: var(--card);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>é›²äº•é³´è¨ºæ–­ï¼ˆ24å•/60å•ãƒ»æ—¥æœ¬èªãƒãƒƒãƒ—ç‰ˆï¼‰</h1>
        <div class="muted">
          æ—¥å¸¸ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ã‚ãªãŸã®ç«‹ã¡ä½ç½®ã¨ç›¸æ€§ãŒã‚ã‹ã‚‹è¨ºæ–­ã§ã™ã€‚å›ç­”ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã®ã¿ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚
        </div>
      </div>
      <div class="row">
        <button class="btn ghost" id="mode24">24å•ç‰ˆï¼ˆæ”¹è‰¯ï¼‰</button>
        <button class="btn" id="mode60">60å•ç‰ˆï¼ˆã˜ã£ãã‚Šï¼‰</button>
      </div>
    </header>

    <section class="card pad" style="margin:12px 0; background:#f8fafc; border-left:5px solid var(--brand);">
      <div class="title">âš ï¸ ã”æ¡ˆå†…</div>
      <div class="disclaimer" style="font-size:14px; line-height:1.6;">
        æœ¬è¨ºæ–­ã¯ãƒ¦ãƒ³ã‚°å¿ƒç†å­¦ç³»ã‚¿ã‚¤ãƒ—è«–ãŠã‚ˆã³ã‚½ã‚·ã‚ªãƒ‹ã‚¯ã‚¹ç†è«–ã«ã€Œç€æƒ³ã‚’å¾—ã¦ã€é›²äº•é³´ãŒå†è¨­è¨ˆã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«è¨ºæ–­ã§ã™ã€‚<br>
        å…¬å¼ã®ã‚½ã‚·ã‚ªãƒ‹ã‚¯ã‚¹/MBTI/16Personalitiesç­‰ã¨ã¯é–¢ä¿‚ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
        å›ç­”ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Œçµã—ã€ã‚µãƒ¼ãƒé€ä¿¡ã¯ã•ã‚Œã¾ã›ã‚“ã€‚
      </div>
    </section>

    <section id="progressCard" class="card pad">
      <div class="progress"><div id="bar"></div></div>
      <div id="count" class="muted" style="margin-top:6px;">0/0 å›ç­”ï¼ˆ0%ï¼‰</div>
    </section>

    <section id="questionCard" class="card" style="margin-top:16px;"></section>

    <section id="resultCard" class="result" style="display:none; margin-top:20px;"></section>
    <div id="warnMsg" class="warn"></div>
  </div>

  <div class="footer">
    <div class="inner">
      <span id="modeLabel">24å•ç‰ˆï¼ˆæ”¹è‰¯ï¼‰</span>
      <div>
        <button id="calcBtn" class="btn">è¨ºæ–­ã™ã‚‹</button>
        <button id="copyBtn" class="btn ghost">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      </div>
    </div>
  </div>
  <!-- ===================== JavaScriptéƒ¨åˆ† ===================== --> 
  <script>
  /* ===================== æ”¹è‰¯ç‰ˆ 24å•ï¼ˆç²¾é¸ãƒ»æœ€é©åŒ–ï¼‰ ===================== */
const Q24 = [
  // E/Iï¼ˆå¤–å‘â€•å†…å‘ï¼‰
  {id:'q1',  text:'åˆå¯¾é¢ã§ã‚‚è‡ªåˆ†ã‹ã‚‰è©±ã—ã‹ã‘ã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'EI', polarity:+1},
  {id:'q2',  text:'é•·æ™‚é–“ã®äº¤æµã®å¾Œã¯ã€ä¸€äººã§ä¼‘ã‚€æ™‚é–“ãŒå¿…è¦ã ã€‚', axis:'EI', polarity:-1},
  {id:'q3',  text:'äººã¨ä¸€ç·’ã«éã”ã™ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæ¹§ã„ã¦ãã‚‹ã€‚', axis:'EI', polarity:+1},
  {id:'q4',  text:'é™ã‹ãªç’°å¢ƒã§éã”ã™æ–¹ãŒè½ã¡ç€ãã€‚', axis:'EI', polarity:-1},

  // N/Sï¼ˆç›´æ„Ÿâ€•æ„Ÿè¦šï¼‰
  {id:'q5',  text:'å‡ºæ¥äº‹ã®ã€Œå…ˆã®å±•é–‹ã€ã‚’æƒ³åƒã—ãªãŒã‚‰è€ƒãˆã‚‹ã€‚', axis:'NS', polarity:+1}, // Ni
  {id:'q6',  text:'äº”æ„Ÿï¼ˆåŒ‚ã„ãƒ»éŸ³ãƒ»æ‰‹è§¦ã‚Šï¼‰ã«æ•æ„Ÿã ã€‚', axis:'NS', polarity:-1},         // Si
  {id:'q7',  text:'ç„¡é–¢ä¿‚ã«è¦‹ãˆã‚‹äº‹æŸ„ã‹ã‚‰é–¢é€£ã‚’è¦‹å‡ºã™ã“ã¨ãŒå¾—æ„ã ã€‚', axis:'NS', polarity:+1}, // Ne
  {id:'q8',  text:'æ•°å­—ã‚„å…·ä½“çš„äº‹å®Ÿã‚’é‡è¦–ã—ãªã„ã¨ä¸å®‰ã«ãªã‚‹ã€‚', axis:'NS', polarity:-1},      // S

  // T/Fï¼ˆè«–ç†â€•å€«ç†ï¼‰
  {id:'q9',  text:'è«–ç†ãŒç ´ç¶»ã—ã¦ã„ã‚‹ã¨ç´å¾—ã§ããªã„ã€‚', axis:'TF', polarity:+1}, // Ti
  {id:'q10', text:'å…¬å¹³ã•ã‚„ãƒ«ãƒ¼ãƒ«ã®ä¸€è²«æ€§ã‚’å„ªå…ˆã™ã‚‹ã€‚', axis:'TF', polarity:+1}, // T
  {id:'q11', text:'äººã‚’å‚·ã¤ã‘ãªã„ã‚ˆã†è¡¨ç¾ã«æ°—ã‚’é…ã‚‹ã€‚', axis:'TF', polarity:-1}, // Fi
  {id:'q12', text:'å ´ã®é›°å›²æ°—ã‚„ç©ºæ°—ã®å¤‰åŒ–ã«æ•æ„Ÿã ã€‚', axis:'TF', polarity:-1},   // Fe

  // J/Pï¼ˆè¨ˆç”»æ€§â€•æŸ”è»Ÿæ€§ï¼‰
  {id:'q13', text:'é€±ã®åˆã‚ã«äºˆå®šã‚’ç«‹ã¦ã¦ãŠãã¨å®‰å¿ƒã™ã‚‹ã€‚', axis:'JP', polarity:+1},
  {id:'q14', text:'ç· åˆ‡ã¯å‰å€’ã—ã§çµ‚ã‚ã‚‰ã›ãŸã„ã€‚', axis:'JP', polarity:+1},
  {id:'q15', text:'æ–°ã—ã„æƒ…å ±ãŒå…¥ã‚Œã°è¨ˆç”»ã‚’ã™ãã«å¤‰ãˆã‚‰ã‚Œã‚‹ã€‚', axis:'JP', polarity:-1},
  {id:'q16', text:'æ—…å…ˆã§ã¯ãã®å ´ã®æµã‚Œã§å‹•ãã®ãŒæ¥½ã—ã„ã€‚', axis:'JP', polarity:-1},

  // æ©Ÿèƒ½ç³» Ni / Ne / Si / Se / Ti / Te / Fi / Fe
  {id:'q17', text:'æœªæ¥ã‚’ã€Œå¿…ç„¶ã®æµã‚Œã€ã¨ã—ã¦äºˆæ„Ÿã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'Ni', polarity:+1},
  {id:'q18', text:'ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ¬¡ã€…ã«æ€ã„ã¤ãã€äººã«æŠ•ã’ã‹ã‘ã‚‹ã®ãŒå¥½ãã ã€‚', axis:'Ne', polarity:+1},
  {id:'q19', text:'å¿«é©ãªç’°å¢ƒï¼ˆæ¸©åº¦ãƒ»éŸ³ãƒ»å…‰ï¼‰ãŒãªã„ã¨é›†ä¸­ã—ã«ãã„ã€‚', axis:'Si', polarity:+1},
  {id:'q20', text:'ç·Šå¼µã—ãŸå ´é¢ã§è‡ªç„¶ã¨ä¸»å°æ¨©ã‚’æ¡ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', axis:'Se', polarity:+1},
  {id:'q21', text:'æ¦‚å¿µã‚„å®šç¾©ã‚’ãã¡ã‚“ã¨æ•´ç†ã—ãŸããªã‚‹ã€‚', axis:'Ti', polarity:+1},
  {id:'q22', text:'åŠ¹ç‡çš„ãªä»•çµ„ã¿ã‚’è€ƒãˆã‚‹ã®ãŒå¾—æ„ã ã€‚', axis:'Te', polarity:+1},
  {id:'q23', text:'ç›¸æ‰‹ã®ä¾¡å€¤è¦³ã‚’å°Šé‡ã—ã¦æ¥ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã ã¨æ€ã†ã€‚', axis:'Fi', polarity:+1},
  {id:'q24', text:'è‡ªåˆ†ã®æ„Ÿæƒ…è¡¨ç¾ãŒå ´ã®é›°å›²æ°—ã‚’å·¦å³ã™ã‚‹ã¨æ€ã†ã€‚', axis:'Fe', polarity:+1},
];

/* ===================== æ”¹è‰¯ç‰ˆ 60å•ï¼ˆç²¾é¸ãƒ»æœ€é©åŒ–ï¼‰ ===================== */
const Q60 = [
  // ===================== E/Iï¼ˆå¤–å‘â€•å†…å‘ï¼‰ =====================
  {id:'q1',  text:'äºˆå®šã®ãªã„ä¼‘æ—¥ã€äººã¨ä¼šã†ç´„æŸãŒã‚ã‚‹ã¨å¬‰ã—ã„ã€‚', axis:'EI', polarity:+1},
  {id:'q2',  text:'é•·æ™‚é–“ã®äº¤æµã®å¾Œã¯ä¸€äººã§ä¼‘ã‚€æ™‚é–“ãŒå¿…è¦ã ã€‚', axis:'EI', polarity:-1},
  {id:'q3',  text:'åˆå¯¾é¢ã§ã‚‚ç©æ¥µçš„ã«è©±ã—ã‹ã‘ã‚‰ã‚Œã‚‹ã€‚', axis:'EI', polarity:+1},
  {id:'q4',  text:'é™ã‹ã«ä¸€äººã§éã”ã™æ–¹ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å›å¾©ã§ãã‚‹ã€‚', axis:'EI', polarity:-1},
  {id:'q5',  text:'å¤§äººæ•°ã§ã®é›‘è«‡ã‚„ã‚¤ãƒ™ãƒ³ãƒˆã¯æ¥½ã—ã„ã€‚', axis:'EI', polarity:+1},
  {id:'q6',  text:'ä¼šè­°ã‚„é›†ã¾ã‚Šã®å¾Œã¯ã©ã£ã¨ç–²ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'EI', polarity:-1},

  // ===================== N/Sï¼ˆç›´æ„Ÿâ€•æ„Ÿè¦šï¼‰ =====================
  {id:'q7',  text:'å‡ºæ¥äº‹ã®èƒŒå¾Œã«ã‚ã‚‹æµã‚Œã‚„æœªæ¥ã‚’è€ƒãˆã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'Ni', polarity:+1},
  {id:'q8',  text:'æ–°ã—ã„ãƒ¢ãƒã‚’è¦‹ã‚‹ã¨å¿œç”¨ã‚„æœªæ¥åƒã‚’æƒ³åƒã™ã‚‹ã€‚', axis:'Ne', polarity:+1},
  {id:'q9',  text:'æ•°å­—ã‚„äº‹å®Ÿã‚’æ ¹æ‹ ã«åˆ¤æ–­ã™ã‚‹ã®ã‚’å¥½ã‚€ã€‚', axis:'S', polarity:+1},
  {id:'q10', text:'äº”æ„Ÿï¼ˆåŒ‚ã„ãƒ»æ¸©åº¦ãƒ»æ‰‹è§¦ã‚Šï¼‰ã«æ•æ„Ÿã ã€‚', axis:'Si', polarity:+1},
  {id:'q11', text:'ç„¡é–¢ä¿‚ã«è¦‹ãˆã‚‹äº‹æŸ„ã‹ã‚‰é–¢é€£æ€§ã‚’è¦‹å‡ºã™ã®ãŒå¾—æ„ã ã€‚', axis:'Ne', polarity:+1},
  {id:'q12', text:'ã€Œæœªæ¥ã®å¿…ç„¶æ€§ã€ã‚’ç›´æ„Ÿçš„ã«æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', axis:'Ni', polarity:+1},
  {id:'q13', text:'ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„é“å…·ã®ç´°éƒ¨ã«ã“ã ã‚ã‚‹ã€‚', axis:'Si', polarity:+1},
  {id:'q14', text:'ç’°å¢ƒã®å¤‰åŒ–ï¼ˆéŸ³ãƒ»å…‰ï¼‰ã§æ°—åˆ†ãŒå¤§ããå¤‰ã‚ã‚‹ã€‚', axis:'Si', polarity:+1},

  // ===================== T/Fï¼ˆè«–ç†â€•å€«ç†ï¼‰ =====================
  {id:'q15', text:'è­°è«–ã§ã¯è«–ç†ã®æ•´åˆæ€§ã‚’æœ€å„ªå…ˆã™ã‚‹ã€‚', axis:'Ti', polarity:+1},
  {id:'q16', text:'åŠ¹ç‡ã‚„æˆæœã‚’é‡è¦–ã—ã¦åˆ¤æ–­ã™ã‚‹ã€‚', axis:'Te', polarity:+1},
  {id:'q17', text:'äººã®æ°—æŒã¡ã‚’å¤§åˆ‡ã«ã—ã¦çµè«–ã‚’å‡ºã™ã€‚', axis:'Fi', polarity:+1},
  {id:'q18', text:'å ´ã®é›°å›²æ°—ã«åˆã‚ã›ã¦è¡Œå‹•ã‚’å¤‰ãˆã‚‹ã€‚', axis:'Fe', polarity:+1},
  {id:'q19', text:'åŸå› ã‚’å¾¹åº•çš„ã«åˆ†æã™ã‚‹ã€‚', axis:'Ti', polarity:+1},
  {id:'q20', text:'æ•°å€¤ã§æˆæœã‚’æ¸¬ã‚‹ã“ã¨ã‚’å¥½ã‚€ã€‚', axis:'Te', polarity:+1},
  {id:'q21', text:'ä»²é–“ã®ä¾¡å€¤è¦³ã‚’å°Šé‡ã—ã¦å¯¾å¿œã™ã‚‹ã€‚', axis:'Fi', polarity:+1},
  {id:'q22', text:'è‡ªåˆ†ã®æ„Ÿæƒ…è¡¨ç¾ã§å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹ã€‚', axis:'Fe', polarity:+1},

  // ===================== J/Pï¼ˆè¨ˆç”»æ€§â€•æŸ”è»Ÿæ€§ï¼‰ =====================
  {id:'q23', text:'é€±ã®åˆã‚ã«äºˆå®šãŒåŸ‹ã¾ã£ã¦ã„ã‚‹ã¨å®‰å¿ƒã™ã‚‹ã€‚', axis:'JP', polarity:+1},
  {id:'q24', text:'ç· åˆ‡ã¯å‰å€’ã—ã§çµ‚ã‚ã‚‰ã›ãŸã„ã€‚', axis:'JP', polarity:+1},
  {id:'q25', text:'æ—…ã¯è¡Œãå½“ãŸã‚Šã°ã£ãŸã‚Šã§æ±ºã‚ãŸã„ã€‚', axis:'JP', polarity:-1},
  {id:'q26', text:'ç›´å‰ã«è¨ˆç”»ã‚’å¤‰ãˆã¦ã‚‚å¹³æ°—ã ã€‚', axis:'JP', polarity:-1},
  {id:'q27', text:'æœºã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½“ç³»çš„ã«æ•´ç†ã™ã‚‹ã®ãŒå¥½ãã ã€‚', axis:'JP', polarity:+1},
  {id:'q28', text:'äºˆå®šã¯æŸ”è»Ÿã«å‹•ã‹ã›ã‚‹æ–¹ãŒå®‰å¿ƒã™ã‚‹ã€‚', axis:'JP', polarity:-1},
  {id:'q29', text:'ToDoã‚’å„ªå…ˆåº¦é †ã«ä¸¦ã¹ã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'JP', polarity:+1},
  {id:'q30', text:'è¨ˆç”»ã‚’ã‚ã¾ã‚Šç´°ã‹ãæ±ºã‚ãšã«é€²ã‚ãŸã„ã€‚', axis:'JP', polarity:-1},

  // ===================== æ©Ÿèƒ½å¼·åŒ– Ni/Ne/Si/Se/Ti/Te/Fi/Fe =====================
  {id:'q31', text:'é•·æœŸçš„ãªè¦–ç‚¹ã§ç‰©äº‹ã‚’è€ƒãˆã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'Ni', polarity:+1},
  {id:'q32', text:'æœªæ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚’èªã‚‹ã®ãŒå¾—æ„ã ã€‚', axis:'Ni', polarity:+1},
  {id:'q33', text:'æ€ã„ã¤ã„ãŸã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ¬¡ã€…åºƒã’ã¦ã„ãã€‚', axis:'Ne', polarity:+1},
  {id:'q34', text:'æ–°ã—ã„å¯èƒ½æ€§ã‚’äººã«æç¤ºã™ã‚‹ã®ãŒå¥½ãã ã€‚', axis:'Ne', polarity:+1},
  {id:'q35', text:'å¿«é©ã•ã‚„å±…å¿ƒåœ°ã‚’é‡è¦–ã—ã¦è¡Œå‹•ã™ã‚‹ã€‚', axis:'Si', polarity:+1},
  {id:'q36', text:'ä½“èª¿ã‚„ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã«æ•æ„Ÿã ã€‚', axis:'Si', polarity:+1},
  {id:'q37', text:'ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã®å ´é¢ã§è‡ªç„¶ã¨ä¸»å°æ¨©ã‚’æ¡ã‚‹ã€‚', axis:'Se', polarity:+1},
  {id:'q38', text:'å¯¾ç«‹å ´é¢ã§å¼·æ°—ã«å‡ºã‚„ã™ã„ã€‚', axis:'Se', polarity:+1},
  {id:'q39', text:'ç†å±ˆã‚„å®šç¾©ãŒæ›–æ˜§ã ã¨æ°—ã«ãªã‚‹ã€‚', axis:'Ti', polarity:+1},
  {id:'q40', text:'ä»•çµ„ã¿ã‚’æ•´ç†ã—ã¦ç†è§£ã™ã‚‹ã®ãŒå¾—æ„ã€‚', axis:'Ti', polarity:+1},
  {id:'q41', text:'åŠ¹ç‡åŒ–ã®æ–¹æ³•ã‚’è€ƒãˆã‚‹ã®ãŒå¥½ãã€‚', axis:'Te', polarity:+1},
  {id:'q42', text:'æˆæœã‚„æ•°å€¤ã§è©•ä¾¡ã•ã‚ŒãŸã„ã€‚', axis:'Te', polarity:+1},
  {id:'q43', text:'äººã¨ã®è·é›¢æ„Ÿã‚’å¤§äº‹ã«ã™ã‚‹ã€‚', axis:'Fi', polarity:+1},
  {id:'q44', text:'ç›¸æ‰‹ã®ä¾¡å€¤è¦³ã‚’å°Šé‡ã—ã¦åˆ¤æ–­ã™ã‚‹ã€‚', axis:'Fi', polarity:+1},
  {id:'q45', text:'å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹ã¨è‡ªåˆ†ã‚‚æ¥½ã—ããªã‚‹ã€‚', axis:'Fe', polarity:+1},
  {id:'q46', text:'æ„Ÿæƒ…ã‚’å…±æœ‰ã—ã¦é›°å›²æ°—ã‚’é«˜ã‚ãŸã„ã€‚', axis:'Fe', polarity:+1},

  // ===================== è£œåŠ©ãƒ»å·®åˆ¥åŒ–ç”¨ =====================
  {id:'q47', text:'ãƒ«ãƒ¼ãƒ«ã®ä¸€è²«æ€§ã«å¼·ãã“ã ã‚ã‚‹ã€‚', axis:'Ti', polarity:+1},
  {id:'q48', text:'ä»Šã“ã®ç¬é–“ã®æ„Ÿè¦šã‚’å¤§åˆ‡ã«ã™ã‚‹ã€‚', axis:'Si', polarity:+1},
  {id:'q49', text:'å‘¨å›²ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«å½±éŸ¿ã•ã‚Œã‚„ã™ã„ã€‚', axis:'Fe', polarity:+1},
  {id:'q50', text:'ç›¸æ‰‹ã®å¼±ç‚¹ã‚’ã™ãã«è¦‹æŠœã„ã¦ã—ã¾ã†ã€‚', axis:'Se', polarity:+1},
  {id:'q51', text:'æŠ½è±¡çš„ãªç†è«–ã‚ˆã‚Šå…·ä½“çš„ãªå®Ÿç¸¾ã‚’ä¿¡ã˜ã‚‹ã€‚', axis:'Te', polarity:+1},
  {id:'q52', text:'ç›¸æ‰‹ã®ä¿¡å¿µã‚„ä¾¡å€¤è¦³ã‚’å°Šé‡ã™ã‚‹ã€‚', axis:'Fi', polarity:+1},
  {id:'q53', text:'æœªæ¥ã‚ˆã‚Šã‚‚ç¾åœ¨ã‚’æ¥½ã—ã‚€æ–¹ãŒå¤§åˆ‡ã ã€‚', axis:'Si', polarity:+1},
  {id:'q54', text:'å›°é›£ãªå ´é¢ã§ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã‚„ã™ã„ã€‚', axis:'Se', polarity:+1},
  {id:'q55', text:'æŠ½è±¡ç†è«–ã‚’æ·±ãè€ƒãˆã‚‹ã®ãŒå¥½ãã€‚', axis:'Ti', polarity:+1},
  {id:'q56', text:'åŠ¹ç‡ã‚’æ±‚ã‚ã¦ã‚·ã‚¹ãƒ†ãƒ ã‚’æ”¹å–„ã™ã‚‹ã®ãŒå¾—æ„ã€‚', axis:'Te', polarity:+1},
  {id:'q57', text:'äººé–“é–¢ä¿‚ã®ä¸­ã§ä¿¡å¿µã‚’å¤§äº‹ã«ã™ã‚‹ã€‚', axis:'Fi', polarity:+1},
  {id:'q58', text:'é›°å›²æ°—ã‚’èª­ã‚“ã§è¡Œå‹•ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚', axis:'Fe', polarity:+1},
  {id:'q59', text:'æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ã¦åˆºæ¿€ã‚’æ±‚ã‚ã‚‹ã€‚', axis:'Ne', polarity:+1},
  {id:'q60', text:'ä¸€ã¤ã®æœªæ¥åƒã«é›†ä¸­ã—ã¦è€ƒãˆè¾¼ã‚€ã€‚', axis:'Ni', polarity:+1},
];
    /* ===================== ã‚¿ã‚¤ãƒ—å®šç¾© ===================== */
const TYPES = {
  IEE:{name:'ã‚¢ã‚¤ãƒ‡ã‚¢å†’é™ºå®¶', cluster:'ã‚¢ã‚¤ãƒ‡ã‚¢ãƒãƒ³å‹', perspective:'ã‚¢ã‚¤ãƒ‡ã‚¢è¦–ç‚¹', quadra:'Delta'},
  IEI:{name:'å¤¢è¦‹ã‚‹å…±æ„Ÿè€…', cluster:'å¤¢èªã‚Šå‹', perspective:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯è¦–ç‚¹', quadra:'Beta'},
  EIE:{name:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶', cluster:'ç››ã‚Šä¸Šã’å½¹å‹', perspective:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯è¦–ç‚¹', quadra:'Beta'},
  EII:{name:'ãŠäººå¥½ã—ä»²è£å½¹', cluster:'ç™’ã—å‹', perspective:'èª¿å’Œè¦–ç‚¹', quadra:'Delta'},
  ILE:{name:'ã²ã‚‰ã‚ãç™ºæ˜å®¶', cluster:'ã‚¢ã‚¤ãƒ‡ã‚¢ãƒãƒ³å‹', perspective:'ã‚¢ã‚¤ãƒ‡ã‚¢è¦–ç‚¹', quadra:'Alpha'},
  LII:{name:'ç†å±ˆãƒã‚¹ã‚¿ãƒ¼', cluster:'å‚è¬€å‹', perspective:'ãƒ«ãƒ¼ãƒ«è¦–ç‚¹', quadra:'Alpha'},
  LIE:{name:'æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼', cluster:'å‚è¬€å‹', perspective:'ã‚¢ã‚¤ãƒ‡ã‚¢è¦–ç‚¹', quadra:'Gamma'},
  ILI:{name:'æœªæ¥äºˆå ±å£«', cluster:'å¤¢èªã‚Šå‹', perspective:'ãƒ«ãƒ¼ãƒ«è¦–ç‚¹', quadra:'Gamma'},
  ESE:{name:'å ´ã‚’ç››ã‚Šä¸Šã’éšŠé•·', cluster:'ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼å‹', perspective:'ä¸»å½¹è¦–ç‚¹', quadra:'Alpha'},
  ESI:{name:'æ­£ç¾©ã®ç•ªäºº', cluster:'å®ˆã‚Šå½¹å‹', perspective:'ãƒ«ãƒ¼ãƒ«è¦–ç‚¹', quadra:'Gamma'},
  SEE:{name:'ã‚«ãƒªã‚¹ãƒé…ä¿¡è€…', cluster:'ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼å‹', perspective:'ä¸»å½¹è¦–ç‚¹', quadra:'Gamma'},
  SLE:{name:'ã‚´ãƒ¼ã‚´ãƒ¼è¡Œå‹•æ´¾', cluster:'ç››ã‚Šä¸Šã’å½¹å‹', perspective:'ä¸»å½¹è¦–ç‚¹', quadra:'Beta'},
  SEI:{name:'ã‚†ã‚‹ãµã‚ç™’ã—å½¹', cluster:'ç™’ã—å‹', perspective:'èª¿å’Œè¦–ç‚¹', quadra:'Alpha'},
  LSE:{name:'æ®µå–ã‚Šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼', cluster:'æ®µå–ã‚Šå‹', perspective:'ãƒ«ãƒ¼ãƒ«è¦–ç‚¹', quadra:'Delta'},
  LSI:{name:'ãƒ«ãƒ¼ãƒ«ç•ªé•·', cluster:'æ®µå–ã‚Šå‹', perspective:'ãƒ«ãƒ¼ãƒ«è¦–ç‚¹', quadra:'Beta'},
  SLI:{name:'ãƒã‚¤ãƒšãƒ¼ã‚¹è·äºº', cluster:'å®ˆã‚Šå½¹å‹', perspective:'èª¿å’Œè¦–ç‚¹', quadra:'Delta'},
};

/* ===================== ç›¸æ€§ï¼ˆãƒ‡ãƒ¥ã‚¢ãƒ«/åŒã‚¯ã‚¢ãƒ‰ãƒ©/ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆï¼‰ ===================== */
const REL = {
  IEE:{dual:'ãƒã‚¤ãƒšãƒ¼ã‚¹è·äºº', same:['æ®µå–ã‚Šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼','ãŠäººå¥½ã—ä»²è£å½¹'], conflict:'ãƒ«ãƒ¼ãƒ«ç•ªé•·'},
  IEI:{dual:'ã‚´ãƒ¼ã‚´ãƒ¼è¡Œå‹•æ´¾', same:['ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶','ãƒ«ãƒ¼ãƒ«ç•ªé•·'], conflict:'æ®µå–ã‚Šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼'},
  EIE:{dual:'ãƒ«ãƒ¼ãƒ«ç•ªé•·', same:['å¤¢è¦‹ã‚‹å…±æ„Ÿè€…','ã‚´ãƒ¼ã‚´ãƒ¼è¡Œå‹•æ´¾'], conflict:'ãƒã‚¤ãƒšãƒ¼ã‚¹è·äºº'},
  EII:{dual:'ã‚«ãƒªã‚¹ãƒé…ä¿¡è€…', same:['æ®µå–ã‚Šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼','ãƒã‚¤ãƒšãƒ¼ã‚¹è·äºº'], conflict:'ã‚´ãƒ¼ã‚´ãƒ¼è¡Œå‹•æ´¾'},
  ILE:{dual:'ã‚†ã‚‹ãµã‚ç™’ã—å½¹', same:['ç†å±ˆãƒã‚¹ã‚¿ãƒ¼','å ´ã‚’ç››ã‚Šä¸Šã’éšŠé•·'], conflict:'æ­£ç¾©ã®ç•ªäºº'},
  LII:{dual:'å ´ã‚’ç››ã‚Šä¸Šã’éšŠé•·', same:['ã²ã‚‰ã‚ãç™ºæ˜å®¶','ã‚†ã‚‹ãµã‚ç™’ã—å½¹'], conflict:'ã‚«ãƒªã‚¹ãƒé…ä¿¡è€…'},
  LIE:{dual:'æ­£ç¾©ã®ç•ªäºº', same:['æœªæ¥äºˆå ±å£«','ç†å±ˆãƒã‚¹ã‚¿ãƒ¼'], conflict:'ã‚†ã‚‹ãµã‚ç™’ã—å½¹'},
  ILI:{dual:'ã‚«ãƒªã‚¹ãƒé…ä¿¡è€…', same:['æ­£ç¾©ã®ç•ªäºº','æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼'], conflict:'å ´ã‚’ç››ã‚Šä¸Šã’éšŠé•·'},
  ESE:{dual:'ç†å±ˆãƒã‚¹ã‚¿ãƒ¼', same:['ã²ã‚‰ã‚ãç™ºæ˜å®¶','ã‚†ã‚‹ãµã‚ç™’ã—å½¹'], conflict:'æœªæ¥äºˆå ±å£«'},
  ESI:{dual:'æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼', same:['æœªæ¥äºˆå ±å£«','ç†å±ˆãƒã‚¹ã‚¿ãƒ¼'], conflict:'ã²ã‚‰ã‚ãç™ºæ˜å®¶'},
  SEE:{dual:'æœªæ¥äºˆå ±å£«', same:['æ­£ç¾©ã®ç•ªäºº','æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼'], conflict:'ç†å±ˆãƒã‚¹ã‚¿ãƒ¼'},
  SLE:{dual:'å¤¢è¦‹ã‚‹å…±æ„Ÿè€…', same:['ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶','ãƒ«ãƒ¼ãƒ«ç•ªé•·'], conflict:'ãŠäººå¥½ã—ä»²è£å½¹'},
  SEI:{dual:'ã²ã‚‰ã‚ãç™ºæ˜å®¶', same:['å ´ã‚’ç››ã‚Šä¸Šã’éšŠé•·','ç†å±ˆãƒã‚¹ã‚¿ãƒ¼'], conflict:'æˆ¦ç•¥ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼'},
  LSE:{dual:'å¤¢è¦‹ã‚‹å…±æ„Ÿè€…', same:['ãŠäººå¥½ã—ä»²è£å½¹','ãƒã‚¤ãƒšãƒ¼ã‚¹è·äºº'], conflict:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶'},
  LSI:{dual:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶', same:['å¤¢è¦‹ã‚‹å…±æ„Ÿè€…','ã‚´ãƒ¼ã‚´ãƒ¼è¡Œå‹•æ´¾'], conflict:'ã‚¢ã‚¤ãƒ‡ã‚¢å†’é™ºå®¶'},
  SLI:{dual:'ã‚¢ã‚¤ãƒ‡ã‚¢å†’é™ºå®¶', same:['æ®µå–ã‚Šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼','ãŠäººå¥½ã—ä»²è£å½¹'], conflict:'ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯æ¼”å‡ºå®¶'},
};

/* ===================== ã‚¿ã‚¤ãƒ—è©³ç´°ï¼ˆå…¨16ã‚¿ã‚¤ãƒ—ï¼‹variantsï¼‰ ===================== */
const DETAIL = {
  IEI: {
    intro: "æœªæ¥ã‚’ç‰©èªã¨ã—ã¦èªã‚Šã€äººã®æ„Ÿæƒ…ã‚’å„ªã—ãã™ãã„ä¸Šã’ã‚‹æ„Ÿå—æ€§ã®æŒã¡ä¸»ã€‚é›°å›²æ°—ã‚’å¤§åˆ‡ã«ã—ã€å ´ã«å®‰å¿ƒæ„Ÿã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚",
    strength: ["æ„Ÿæƒ…ã«æ•æ„Ÿã§å…±æ„ŸåŠ›ãŒé«˜ã„","èŠ¸è¡“çš„ã‚»ãƒ³ã‚¹","æœªæ¥åƒã‚’èªã‚Œã‚‹","é›°å›²æ°—ã‚’å’Œã¾ã›ã‚‹","å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹"],
    weak: ["ç¾å®Ÿã‚¿ã‚¹ã‚¯ãŒè‹¦æ‰‹","å„ªæŸ”ä¸æ–­","ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã«å¼±ã„","å¯¾ç«‹å›é¿ã§å…ˆé€ã‚Š","ä¸»å°è€…ã«èç¸®"],
    vtuber: ["ASMR","æœ—èª­ãƒ»æ­Œæ ","ä¸–ç•Œè¦³é‡è¦–ã®é›‘è«‡"],
    role: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ©ãƒ¼ï¼é›°å›²æ°—æ‹…å½“",
    variants: {
      dreamer: "å¹»æƒ³çš„ãªç™ºæƒ³ãŒéš›ç«‹ã¤ã€ãƒ‰ãƒªãƒ¼ãƒãƒ¼å‹ã€ã€‚",
      empath: "äººã®å¿ƒã«å¯„ã‚Šæ·»ã†ã€å…±æ„Ÿè€…å‹ã€ã€‚",
      artist: "èŠ¸è¡“çš„è¡¨ç¾ã«é•·ã‘ãŸã€ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå‹ã€ã€‚"
    }
  },
  IEE: {
    intro: "äººã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¸¦æ¨ªç„¡å°½ã«ã¤ãªãå†’é™ºè€…ã€‚æ¬¡ã€…ã«æ–°ã—ã„ä¼ç”»ã‚’ç”Ÿã¿å‡ºã™å­˜åœ¨ã§ã™ã€‚",
    strength: ["å‡ºä¼šã„ã‹ã‚‰ç™ºæƒ³ã‚’å¾—ã‚‹","æµè¡Œã«æ•æ„Ÿ","ç¤¾äº¤çš„ã§æŸ”è»Ÿ","å·»ãè¾¼ã¿åŠ›ãŒé«˜ã„","ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä½œã‚ŠãŒå¾—æ„"],
    weak: ["ç®¡ç†ãŒè‹¦æ‰‹","é›†ä¸­ãŒç¶šã‹ãªã„","å®Ÿè¡ŒåŠ›ä¸è¶³","èˆˆå‘³ãŒç§»ã‚Šã‚„ã™ã„","æƒ…ç†±ãŒæ‹¡æ•£ã—ã‚„ã™ã„"],
    vtuber: ["å‚åŠ å‹é…ä¿¡","çªç™ºã‚³ãƒ©ãƒœ","ã‚²ã‚¹ãƒˆãƒˆãƒ¼ã‚¯"],
    role: "ã‚¢ã‚¤ãƒ‡ã‚¢ãƒãƒ³ï¼ç¨®ã¾ãå½¹",
    variants: {
      connector: "äººè„ˆã‚’åºƒã’ã‚‹ã€ã‚³ãƒã‚¯ã‚¿ãƒ¼å‹ã€ã€‚",
      explorer: "æ–°ã—ã„åˆºæ¿€ã‚’æ±‚ã‚ã‚‹ã€å†’é™ºå®¶å‹ã€ã€‚",
      catalyst: "å ´ã‚’å¤‰ãˆã‚‹ãã£ã‹ã‘ã‚’ä½œã‚‹ã€è§¦åª’å‹ã€ã€‚"
    }
  },
  EIE: {
    intro: "æƒ…ç†±ã‚’èˆå°ã«å¤‰ãˆã‚‹æ¼”å‡ºå®¶ã€‚æ„Ÿæƒ…ã‚’æ“ã‚Šã€ç‰©èªã‚’æ¼”å‡ºã™ã‚‹ã‚«ãƒªã‚¹ãƒæ€§ã‚’æŒã¡ã¾ã™ã€‚",
    strength: ["ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒªãƒ³ã‚°","æ„Ÿæƒ…è¡¨ç¾ã§äººã‚’å‹•ã‹ã™","ã‚«ãƒªã‚¹ãƒæ€§","å…±æ„Ÿã‚’å¼•ãå‡ºã™","é¼“èˆåŠ›"],
    weak: ["æ„Ÿæƒ…çš„ã§ç–²ã‚Œã‚„ã™ã„","è«–ç†ã«å¼±ã„","ãƒ‰ãƒ©ãƒã‚’ç››ã‚Šã™ãã‚‹","ç®¡ç†ãŒè‹¦æ‰‹","å†·é™ã•ä¸è¶³"],
    vtuber: ["æ­Œæ ","æ¼”å‡ºä¼ç”»","ç‰©èªå®Ÿæ³"],
    role: "æ¼”å‡ºæ‹…å½“ï¼ãƒ ãƒ¼ãƒ‰ã‚·ã‚§ã‚¤ãƒ‘ãƒ¼",
    variants: {
      orator: "èª¬å¾—åŠ›ã«å¯Œã‚€ã€ã‚ªãƒ¬ãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚",
      director: "ç‰©èªã‚’ä»•ç«‹ã¦ã‚‹ã€ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼å‹ã€ã€‚",
      motivator: "äººã‚’å¥®ã„ç«‹ãŸã›ã‚‹ã€ãƒ¢ãƒãƒ™ãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚"
    }
  },
  EII: {
    intro: "èª å®Ÿã§æ¸©åšãªä»²è£å½¹ã€‚äººã®æ°—æŒã¡ã‚’å°Šé‡ã—ã€èª¿å’Œã‚’ä¿ã¤æ©‹æ¸¡ã—å½¹ã§ã™ã€‚",
    strength: ["èª å®Ÿã•ã¨ä¿¡é ¼æ„Ÿ","ä»²è£åŠ›","å…±æ„ŸåŠ›","é•·æœŸé–¢ä¿‚ã‚’é‡è¦–","é“å¾³å¿ƒ"],
    weak: ["æ„æ€è¡¨ç¤ºãŒå¼±ã„","ä¸»å°ã§ããªã„","é æ…®ãŒã¡","æ„Ÿæƒ…ã«æµã•ã‚Œã‚„ã™ã„","èé€šãŒåˆ©ã‹ãªã„"],
    vtuber: ["ãŠæ‚©ã¿ç›¸è«‡","å…±æ„Ÿé›‘è«‡","ä»²è£ã‚³ãƒ©ãƒœ"],
    role: "ä»²è£å½¹ï¼è£æ–¹ã‚µãƒãƒ¼ãƒˆ",
    variants: {
      counselor: "ç›¸è«‡å½¹ã®ã€ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼å‹ã€ã€‚",
      mediator: "å¯¾ç«‹ã‚’å’Œã‚‰ã’ã‚‹ã€ãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚",
      guardian: "ä¿¡é ¼ã‚’å®ˆã‚ŠæŠœãã€ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³å‹ã€ã€‚"
    }
  },
  ILE: {
    intro: "è‡ªç”±å¥”æ”¾ã§å¥½å¥‡å¿ƒæ—ºç››ãªç™ºæ˜å®¶ã€‚æ–°ã—ã„å¯èƒ½æ€§ã‚’è¦‹ã¤ã‘å‡ºã—ã€å ´ã«é©šãã‚’ç”Ÿã¿ã¾ã™ã€‚",
    strength: ["ç™ºæƒ³åŠ›è±Šã‹","æŸ”è»Ÿæ€§ã®é«˜ã•","è«–ç†ã¨ç›´æ„Ÿã®èåˆ","å¹…åºƒã„èˆˆå‘³","ä»•æ›ã‘äºº"],
    weak: ["é£½ãã‚„ã™ã„","å®Ÿè¡ŒåŠ›ä¸è¶³","æ·±æ˜ã‚Šå‰ã«æ¬¡ã¸é£›ã³ã¤ã","ãƒªã‚¹ã‚¯ç®¡ç†ãŒç”˜ã„","åæ‹¾ãŒã¤ã‹ãªããªã‚‹"],
    vtuber: ["æ–°ä½œå®Ÿæ³","å®Ÿé¨“ä¼ç”»","ãƒã‚¿æ é…ä¿¡"],
    role: "ãƒã‚¿å‡ºã—ï¼ç™ºæ˜å®¶",
    variants: {
      trickster: "çªæ‹å­ã‚‚ãªã„ã€ãƒˆãƒªãƒƒã‚¯ã‚¹ã‚¿ãƒ¼å‹ã€ã€‚",
      tinkerer: "å®Ÿé¨“ã‚’æ¥½ã—ã‚€ã€ãƒ†ã‚£ãƒ³ã‚«ãƒ¼å‹ã€ã€‚",
      innovator: "æœªæ¥å¿—å‘ã®ã€ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚"
    }
  },
  LII: {
    intro: "å†·é™æ²ˆç€ãªç†å±ˆã®å‚è¬€ã€‚è¤‡é›‘ãªäº‹è±¡ã‚’åˆ†æãƒ»æ•´ç†ã—ã€ä½“ç³»åŒ–ã™ã‚‹é ­è„³å‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚",
    strength: ["åˆ†æåŠ›","ç†è«–ä½“ç³»åŒ–","å®¢è¦³æ€§","æ‰¹åˆ¤çš„æ€è€ƒ","ç²¾åº¦ã®é«˜ã„è¨ˆç”»"],
    weak: ["æ„Ÿæƒ…ã«éˆæ„Ÿ","é ‘å›º","ç´°éƒ¨ã«å›ºåŸ·","ç©ºæ°—ã‚’èª­ã¿ã«ãã„","äººé–“é–¢ä¿‚è»½è¦–"],
    vtuber: ["è§£èª¬é…ä¿¡","è€ƒå¯Ÿå‹•ç”»","æ¤œè¨¼ä¼ç”»"],
    role: "å†·é™å‚è¬€ï¼ã¾ã¨ã‚å½¹",
    variants: {
      analyst: "è«–ç†ã‚’è¿½æ±‚ã™ã‚‹ã€ã‚¢ãƒŠãƒªã‚¹ãƒˆå‹ã€ã€‚",
      architect: "å…¨ä½“æ§‹é€ ã‚’è¨­è¨ˆã™ã‚‹ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆå‹ã€ã€‚",
      judge: "å…¬å¹³ã•ã‚’å¤§åˆ‡ã«ã™ã‚‹ã€ã‚¸ãƒ£ãƒƒã‚¸å‹ã€ã€‚"
    }
  },
  LIE: {
    intro: "æœªæ¥ã‚’è¦‹æ®ãˆã€æˆæœã‚’å‡ºã™ã“ã¨ã«å…¨åŠ›ã‚’æ³¨ãæˆ¦ç•¥å®¶ã€‚",
    strength: ["æˆ¦ç•¥æ€§","å¤§å±€è¦³","å®Ÿè¡ŒåŠ›","æˆæœå¿—å‘","ãƒ“ã‚¸ãƒã‚¹æ„Ÿè¦š"],
    weak: ["å†·å¾¹ã«è¦‹ã‚‰ã‚Œã‚‹","æ„Ÿæƒ…é…æ…®ãŒå¼±ã„","æŸ”è»Ÿæ€§ä¸è¶³","é€Ÿåº¦æ„ŸãŒã‚ºãƒ¬ã‚‹","çŸ­æœŸé–¢ä¿‚ã‚’è»½è¦–"],
    vtuber: ["ä¼ç”»ç«‹æ¡ˆ","é•·æœŸçš„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…ä¿¡"],
    role: "æˆ¦ç•¥å‚è¬€ï¼ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼",
    variants: {
      strategist: "æœªæ¥ã‚’è¦‹æ®ãˆã‚‹ã€ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ã‚¹ãƒˆå‹ã€ã€‚",
      producer: "é€²è¡Œã‚’ç®¡ç†ã™ã‚‹ã€ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼å‹ã€ã€‚",
      commander: "çªç ´åŠ›ã§å°ãã€ã‚³ãƒãƒ³ãƒ€ãƒ¼å‹ã€ã€‚"
    }
  },
  ILI: {
    intro: "æœªæ¥ã‚’äºˆæ¸¬ã—ã€æ…é‡ã«å‹•ãè¦³å¯Ÿè€…ã€‚å†·é™ãªæ´å¯ŸåŠ›ã§ãƒªã‚¹ã‚¯ã‚’ç®¡ç†ã™ã‚‹è³¢è€…ã§ã™ã€‚",
    strength: ["æœªæ¥äºˆæ¸¬","ãƒªã‚¹ã‚¯ç®¡ç†","å†·é™ãªè«–ç†æ€§","è¦³å¯Ÿçœ¼","é•·æœŸè¦–ç‚¹"],
    weak: ["è¡Œå‹•ãŒé…ã„","æ‚²è¦³çš„","æŸ”è»Ÿæ€§ä¸è¶³","å³å¿œæ€§ã«æ¬ ã‘ã‚‹","æµã‚Œã«ä¹—ã‚Œãªã„"],
    vtuber: ["è€ƒå¯Ÿé…ä¿¡","è§£èª¬å‹•ç”»","ã‚·ãƒŠãƒªã‚ªåˆ†æ"],
    role: "å†·é™å‚è¬€ï¼æœªæ¥äºˆå ±",
    variants: {
      prophet: "æœªæ¥ã‚’èª­ã¿è§£ãã€äºˆè¨€è€…å‹ã€ã€‚",
      observer: "é™ã‹ã«è¦³å¯Ÿã™ã‚‹ã€ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼å‹ã€ã€‚",
      critic: "ãƒªã‚¹ã‚¯ã‚’è¦‹æŠœãã€ã‚¯ãƒªãƒ†ã‚£ãƒƒã‚¯å‹ã€ã€‚"
    }
  },
  ESE: {
    intro: "æ˜ã‚‹ã•ã¨ç¤¾äº¤æ€§ã§å ´ã‚’æ”¯é…ã™ã‚‹ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼ã€‚",
    strength: ["æ˜ã‚‹ã•ã§å’Œã¾ã›ã‚‹","åˆå¯¾é¢ã«å¼·ã„","å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹","æ„Ÿæƒ…ã‚­ãƒ£ãƒƒãƒ","ã‚µãƒ¼ãƒ“ã‚¹ç²¾ç¥æ—ºç››"],
    weak: ["è«–ç†ãŒè‹¦æ‰‹","æ„Ÿæƒ…ã«æŒ¯ã‚Šå›ã•ã‚Œã‚„ã™ã„","ç¬é–“é‡è¦–","ä¸»å°ã—ã™ãã‚‹","ç–²ã‚Œã‚„ã™ã„"],
    vtuber: ["é›‘è«‡","æ­Œæ ","ã‚¤ãƒ™ãƒ³ãƒˆMC"],
    role: "å¸ä¼šé€²è¡Œï¼å ´ã®ä¸­å¿ƒ",
    variants: {
      entertainer: "äººã‚’æ¥½ã—ã¾ã›ã‚‹ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼å‹ã€ã€‚",
      host: "æ°—é…ã‚Šä¸Šæ‰‹ãªã€ãƒ›ã‚¹ãƒˆå‹ã€ã€‚",
      spark: "ç©ºæ°—ã‚’ä¸€å¤‰ã•ã›ã‚‹ã€ã‚¹ãƒ‘ãƒ¼ã‚¯å‹ã€ã€‚"
    }
  },
  SEE: {
    intro: "è±ªå¿«ã§è¯ã‚„ã‹ãªã‚«ãƒªã‚¹ãƒã€‚è‡ªä¿¡ã«æº€ã¡ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã§äººã‚’é­…äº†ã—ã¾ã™ã€‚",
    strength: ["ã‚«ãƒªã‚¹ãƒæ€§","ç¬ç™ºåŠ›","è±ªå¿«ã•","å·»ãè¾¼ã¿åŠ›","è‡ªä¿¡ã‚ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹"],
    weak: ["æŒç¶šåŠ›ä¸è¶³","èª¿æ•´ãŒè‹¦æ‰‹","è¡çªã‚’æã‚Œãªã„","ãƒ«ãƒ¼ãƒ«å«Œã„","åç™ºã—ã‚„ã™ã„"],
    vtuber: ["ã‚¢ã‚¤ãƒ‰ãƒ«æ´»å‹•","æ­Œã£ã¦ã¿ãŸ","ãƒ•ã‚¡ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ"],
    role: "ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ¼ï¼ãƒ ãƒ¼ãƒ‰æ”¯é…è€…",
    variants: {
      idol: "æ³¨ç›®ã‚’æµ´ã³ã‚‹ã€ã‚¢ã‚¤ãƒ‰ãƒ«å‹ã€ã€‚",
      leader: "å‰ã«å‡ºã¦ç‰½å¼•ã™ã‚‹ã€ãƒªãƒ¼ãƒ€ãƒ¼å‹ã€ã€‚",
      challenger: "æŒ‘æˆ¦ã‚’æã‚Œãªã„ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼å‹ã€ã€‚"
    }
  },
  SLE: {
    intro: "å‹¢ã„ã¨çªç ´åŠ›ã§çŠ¶æ³ã‚’åˆ‡ã‚Šæ‹“ãã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã€‚",
    strength: ["å³æ–­å³æ±º","å‹‡æ•¢ã•","çªç ´åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","å‹¢ã„"],
    weak: ["è¨ˆç”»ä¸è¶³","è¡çªã‚’æ‹›ãã‚„ã™ã„","ãƒªã‚¹ã‚¯ç®¡ç†ãŒç”˜ã„","æ„Ÿæƒ…é…æ…®ã«æ¬ ã‘ã‚‹","å”èª¿æ€§ãŒä½ã„"],
    vtuber: ["æŒ‘æˆ¦ä¼ç”»","å¯¾æˆ¦ã‚²ãƒ¼ãƒ ","ä½“å½“ãŸã‚Šç³»é…ä¿¡"],
    role: "åˆ‡ã‚Šè¾¼ã¿éšŠé•·ï¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ‹…å½“",
    variants: {
      warrior: "æˆ¦ã„ã«æŒ‘ã‚€ã€ã‚¦ã‚©ãƒªã‚¢ãƒ¼å‹ã€ã€‚",
      pioneer: "æ–°ã—ã„é“ã‚’åˆ‡ã‚Šé–‹ãã€ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢å‹ã€ã€‚",
      enforcer: "æŠ¼ã—é€²ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ•ã‚©ãƒ¼ã‚µãƒ¼å‹ã€ã€‚"
    }
  },
  SEI: {
    intro: "æŸ”ã‚‰ã‹ãç©ã‚„ã‹ãªç™’ã—æ‰‹ã€‚å±…å¿ƒåœ°ã®è‰¯ã•ã‚’æä¾›ã™ã‚‹å­˜åœ¨ã§ã™ã€‚",
    strength: ["é›°å›²æ°—ã‚’å’Œã¾ã›ã‚‹","èãä¸Šæ‰‹","å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹","å¿«é©ã•ã‚’å¤§åˆ‡ã«ã™ã‚‹","æŸ”ã‚‰ã‹ã„æ¥ã—æ–¹"],
    weak: ["å—ã‘èº«","æ±ºæ–­åŠ›ä¸è¶³","ä¸»å°æ€§ãŒå¼±ã„","é•·æœŸå±•æœ›ã«å¼±ã„","æµã•ã‚Œã‚„ã™ã„"],
    vtuber: ["ASMR","é›‘è«‡","ç™’ã—æ "],
    role: "é›°å›²æ°—æ‹…å½“ï¼èãå½¹",
    variants: {
      healer: "äººã‚’ç™’ã™ã€ãƒ’ãƒ¼ãƒ©ãƒ¼å‹ã€ã€‚",
      companion: "å¯„ã‚Šæ·»ã†ã€ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³å‹ã€ã€‚",
      comforter: "å¿«é©ã•ã‚’é‡è¦–ã™ã‚‹ã€ã‚³ãƒ³ãƒ•ã‚©ãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚"
    }
  },
  LSE: {
    intro: "ç¾å®Ÿçš„ã§è¨ˆç”»çš„ãªæ®µå–ã‚Šä¸Šæ‰‹ã€‚å®‰å®šé€²è¡Œã«å„ªã‚Œã‚‹ã€‚",
    strength: ["è¨ˆç”»é‚è¡ŒåŠ›","ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†","è²¬ä»»æ„Ÿ","å®‰å®šé€²è¡Œ","ä¿¡é ¼æ„Ÿ"],
    weak: ["æŸ”è»Ÿæ€§ä¸è¶³","ç†æƒ³ã«å¼±ã„","å‹ã«ã¯ã¾ã‚Šã‚„ã™ã„","èé€šãŒåˆ©ã‹ãªã„","éŠã³å¿ƒä¸è¶³"],
    vtuber: ["å®šæœŸé…ä¿¡","é€²è¡Œãƒ»é‹å–¶ä¼ç”»","æ•´ç†è¡“ã‚³ãƒ³ãƒ†ãƒ³ãƒ„"],
    role: "é€²è¡Œç®¡ç†ï¼è£æ–¹ãƒªãƒ¼ãƒ€ãƒ¼",
    variants: {
      manager: "é€²è¡Œã‚’å®ˆã‚‹ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å‹ã€ã€‚",
      organizer: "æ•´ç†æ•´é “ã«é•·ã‘ãŸã€ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚¶ãƒ¼å‹ã€ã€‚",
      steward: "è²¬ä»»ã‚’é‡ã‚“ã˜ã‚‹ã€ã‚¹ãƒãƒ¥ãƒ¯ãƒ¼ãƒ‰å‹ã€ã€‚"
    }
  },
  LSI: {
    intro: "è¦å¾‹ã¨æ­£ç¢ºã•ã‚’é‡ã‚“ã˜ã‚‹ç›£ç£å½¹ã€‚",
    strength: ["æ­£ç¢ºæ€§ã¨å‡ å¸³é¢ã•","ç§©åºç¶­æŒ","çµ±ç‡åŠ›","è²¬ä»»æ„Ÿ","å®‰å®šæ„Ÿ"],
    weak: ["æŸ”è»Ÿæ€§ä¸è¶³","æ–°å¥‡æ€§ã«å¼±ã„","å³æ ¼ã™ãã‚‹","æ„Ÿæƒ…ã«ç–ã„","æ‰¹åˆ¤çš„ã«ãªã‚Šã‚„ã™ã„"],
    vtuber: ["å¤§ä¼šé‹å–¶","æ¤œè¨¼æ ","ãƒ«ãƒ¼ãƒ«è§£èª¬é…ä¿¡"],
    role: "å¯©åˆ¤å½¹ï¼ç§©åºã®è¦",
    variants: {
      strict: "ç§©åºã‚’å¾¹åº•ã™ã‚‹ã€ã‚¹ãƒˆãƒªã‚¯ãƒˆå‹ã€ã€‚",
      supportive: "ä»²é–“ã‚’æ”¯ãˆã‚‹ã€ã‚µãƒãƒ¼ã‚¿ãƒ¼å‹ã€ã€‚",
      tactical: "çŠ¶æ³ã‚’èª­ã‚€ã€ã‚¿ã‚¯ãƒ†ã‚£ã‚«ãƒ«å‹ã€ã€‚"
    }
  },
  SLI: {
    intro: "å¿è€å¼·ãã‚³ãƒ„ã‚³ãƒ„ç©ã¿ä¸Šã’ã‚‹è·äººæ°—è³ªã€‚å®‰å®šã—ãŸåŠªåŠ›ã§æˆæœã‚’å‡ºã™ã‚¿ã‚¤ãƒ—ã€‚",
    strength: ["ç¶™ç¶šåŠ›","è·äººæ°—è³ª","è½ã¡ç€ã","å®‰å®šæ„Ÿ","å®Ÿå‹™åŠ›"],
    weak: ["æ¶ˆæ¥µçš„","ç¤¾äº¤æ€§ãŒä½ã„","é ‘å›º","æ–°ã—ã„æŒ‘æˆ¦ã«æ¶ˆæ¥µçš„","äººé–“é–¢ä¿‚ã«ç–ã„"],
    vtuber: ["ã‚‚ã®ã¥ãã‚Šé…ä¿¡","ä½œæ¥­ASMR","æ¤œè¨¼ãƒ¬ãƒ“ãƒ¥ãƒ¼"],
    role: "è·äººæ ï¼å®‰å®šè¦å“¡",
    variants: {
      craftsman: "åŠªåŠ›å®¶ã®ã€ã‚¯ãƒ©ãƒ•ãƒ„ãƒãƒ³å‹ã€ã€‚",
      stabilizer: "è½ã¡ç€ãã‚’é‡ã‚“ã˜ã‚‹ã€ã‚¹ã‚¿ãƒ“ãƒ©ã‚¤ã‚¶ãƒ¼å‹ã€ã€‚",
      minimalist: "ç„¡é§„ã‚’å«Œã†ã€ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆå‹ã€ã€‚"
    }
  },
  ESI: {
    intro: "èª å®Ÿã•ã¨å€«ç†è¦³ã§ä»²é–“ã‚’å®ˆã‚‹å®ˆè­·è€…ã€‚",
    strength: ["èª å®Ÿã•ã¨ä¸€è²«æ€§","å€«ç†è¦³ã®é«˜ã•","å®ˆè­·æ„è­˜","å¿ èª å¿ƒ","é–¢ä¿‚ç®¡ç†èƒ½åŠ›"],
    weak: ["æ‰¹åˆ¤çš„ã«ãªã‚Šã‚„ã™ã„","æŸ”è»Ÿæ€§ä¸è¶³","ä¿å®ˆçš„","ä¸»è¦³çš„åˆ¤æ–­ãŒå¼·ã„","æŒ‘æˆ¦ã«æ¶ˆæ¥µçš„"],
    vtuber: ["ãƒ«ãƒ¼ãƒ«ç³»é…ä¿¡","çœŸé¢ç›®å¯¾è«‡","ç›£ç£å½¹"],
    role: "å®ˆè­·è€…ï¼ç§©åºã®ç•ªäºº",
    variants: {
      guardian: "å¿ èª å¿ƒã®å¼·ã„ã€ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³å‹ã€ã€‚",
      critic: "æ‰¹åˆ¤çš„ã«åˆ¤æ–­ã™ã‚‹ã€ã‚¯ãƒªãƒ†ã‚£ãƒƒã‚¯å‹ã€ã€‚",
      loyalist: "ä¿¡é ¼ã‚’é‡ã‚“ã˜ã‚‹ã€ãƒ­ã‚¤ãƒ¤ãƒªã‚¹ãƒˆå‹ã€ã€‚"
    }
  }
};
/* ===================== çµ±åˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  ===================== */
const WEIGHTS = {
  EI: 1.2,
  NS: 1.2,
  TF: 1.2,
  JP: 1.2,
  functions: 1.5,
  extra: 1.3
};


/* è»¸ã‚¹ã‚³ã‚¢ç®—å‡º */
function computeAxes() {
  const ax = {EI:0, NS:0, TF:0, JP:0};
  const func = {Ni:0,Ne:0,Si:0,Se:0,Ti:0,Te:0,Fi:0,Fe:0};
  const counts = {...ax, ...func};
  current.forEach(q=>{
    const val = answers[q.id];
    if(val!==undefined){
      let w = WEIGHTS[q.axis] || WEIGHTS.functions;
      if(ax.hasOwnProperty(q.axis)){ ax[q.axis]+=val*q.polarity*w; counts[q.axis]+=w; }
      else if(func.hasOwnProperty(q.axis)){ func[q.axis]+=val*q.polarity*w; counts[q.axis]+=w; }
    }
  });
  for(const k in ax) if(counts[k]>0) ax[k]/=counts[k];
  for(const k in func) if(counts[k]>0) func[k]/=counts[k];
  return {ax,func};
}

/* è»¸æ–¹å¼ã‚¿ã‚¤ãƒ—åˆ¤å®š */
function pickType({ax,func}){
  function decideAxis(v,p,n){
    if(v>1) return {[p]:1};
    if(v<-1) return {[n]:1};
    const prob=(v+1)/2;
    return {[p]:prob,[n]:1-prob};
  }
  const ei=decideAxis(ax.EI,"E","I");
  const ns=decideAxis(ax.NS,"N","S");
  const tf=decideAxis(ax.TF,"T","F");
  const jp=decideAxis(ax.JP,"J","P");
  const combos=[];
  for(const e in ei)for(const n in ns)for(const t in tf)for(const j in jp)
    combos.push({key:e+n+t+j,score:ei[e]*ns[n]*tf[t]*jp[j]});
  const MAP={ENFP:'IEE',INFP:'IEI',ENFJ:'EIE',INFJ:'EII',ENTP:'ILE',INTJ:'LII',
             ENTJ:'LIE',INTP:'ILI',ESFJ:'ESE',ISFJ:'ESI',ESFP:'SEE',ESTP:'SLE',
             ISFP:'SEI',ESTJ:'LSE',ISTJ:'LSI',ISTP:'SLI'};
  // æ©Ÿèƒ½è£œæ­£
  if(func.Si>func.Ne){ combos.forEach(c=>{ if(c.key.includes("N"))c.score*=0.85; if(c.key.includes("S"))c.score*=1.15; }); }
  if(func.Te>func.Fi){ combos.forEach(c=>{ if(c.key.includes("F"))c.score*=0.9; if(c.key.includes("T"))c.score*=1.1; }); }
  const tally={};
  combos.forEach(c=>{ const k=MAP[c.key]||"IEE"; tally[k]=(tally[k]||0)+c.score; });
  return Object.entries(tally).map(([k,s])=>({key:k,score:s}));
}

/* ===================== ãƒ™ã‚¯ãƒˆãƒ«é¡ä¼¼åº¦è¨ºæ–­ ===================== */
function cosineSim(vec1, vec2){
  let dot=0, norm1=0, norm2=0;
  for(const k in vec1){
    dot += (vec1[k]||0) * (vec2[k]||0);
    norm1 += (vec1[k]||0)**2;
    norm2 += (vec2[k]||0)**2;
  }
  return dot / (Math.sqrt(norm1)*Math.sqrt(norm2)+1e-9);
}

// å‚è€ƒãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä»®ï¼šã‚ˆã‚Šç²¾åº¦ã‚’ä¸Šã’ã‚‹ãªã‚‰å®Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å­¦ç¿’ï¼‰
const TYPE_PROFILES = {
  IEI: {EI:-3, NS:+4, TF:-2, JP:-1},
  IEE: {EI:+3, NS:+3, TF:-1, JP:-2},
  EIE: {EI:+4, NS:+2, TF:-3, JP:+1},
  EII: {EI:-2, NS:+2, TF:-4, JP:+1},
  ILE: {EI:+2, NS:+4, TF:+2, JP:-2},
  LII: {EI:-3, NS:+3, TF:+4, JP:+2},
  LIE: {EI:+1, NS:+3, TF:+4, JP:+3},
  ILI: {EI:-4, NS:+4, TF:+3, JP:-2},
  ESE: {EI:+4, NS:-1, TF:-3, JP:+2},
  ESI: {EI:-2, NS:-1, TF:-4, JP:+3},
  SEE: {EI:+4, NS:+1, TF:-2, JP:-3},
  SLE: {EI:+4, NS:+1, TF:+2, JP:-3},
  SEI: {EI:-3, NS:-2, TF:-2, JP:-2},
  LSE: {EI:+1, NS:-1, TF:+3, JP:+4},
  LSI: {EI:-2, NS:-2, TF:+4, JP:+3},
  SLI: {EI:-4, NS:-3, TF:+1, JP:-1},
};

function vectorDiagnosis(ax){
  const sims = Object.keys(TYPE_PROFILES).map(k=>{
    const sim = cosineSim(ax, TYPE_PROFILES[k]);
    return {key:k, score:sim};
  });
  return sims.sort((a,b)=>b.score-a.score);
}

/* ===================== ä¿¡é ¼åº¦ç®—å‡º ===================== */
function computeConfidence(candidates){
  if(candidates.length<2) return "Low";
  const top = candidates[0].score;
  const second = candidates[1].score;
  const ratio = top / (top+second);
  if(ratio>0.65) return "High";
  if(ratio>0.55) return "Medium";
  return "Low";
}

/* ===================== çµ±åˆãƒ“ãƒ«ãƒ‰ ===================== */
function buildResult(){
  const {ax,func}=computeAxes();
  const candAxis=pickType({ax,func});
  const candVec=vectorDiagnosis(ax);

  // ã‚¹ã‚³ã‚¢ã‚’æ­£è¦åŒ–ã—ã¦åˆç®—ï¼ˆå˜ç´”å¹³å‡ï¼‰
  const tally={};
  candAxis.forEach(c=>{ tally[c.key]=(tally[c.key]||0)+c.score; });
  candVec.forEach(c=>{ tally[c.key]=(tally[c.key]||0)+c.score; });

  const candidates = Object.entries(tally).map(([k,s])=>({key:k,score:s}));
  candidates.sort((a,b)=>b.score-a.score);

  const top=candidates[0];
  const t=TYPES[top.key], rel=REL[top.key], d=DETAIL[top.key];
  const confidence=computeConfidence(candidates);

  lastResult={t,rel,d,ax,func,tKey:top.key,candidates,confidence};
  renderResultView();
}

/* ===================== çµæœæç”» ===================== */
function renderResultView(){
  if(!lastResult)return;
  const {t,rel,d,tKey,candidates,confidence}=lastResult;
  const html=[];
  html.push(`<h2>ã‚ãªãŸã¯ <b>ã€Œ${t.name}ã€</b> ã‚¿ã‚¤ãƒ—</h2>`);
  html.push(`<p class="muted">(ã‚½ã‚·ã‚ªãƒ‹ã‚¯ã‚¹è¡¨è¨˜: <b>${tKey}</b>)</p>`);
  html.push(`<p>${d.intro}</p>`);
  html.push(`<h3>ğŸŒŸ å¼·ã¿</h3><ul>${d.strength.map(x=>`<li>${x}</li>`).join('')}</ul>`);
  html.push(`<h3>âš ï¸ å¼±ã¿</h3><ul>${d.weak.map(x=>`<li>${x}</li>`).join('')}</ul>`);
  html.push(`<h3>ğŸ¤ ç›¸æ€§</h3><ul><li><b>ãƒ‡ãƒ¥ã‚¢ãƒ«:</b>${rel.dual}</li><li><b>åŒã‚¯ã‚¢ãƒ‰ãƒ©:</b>${rel.same.join("ãƒ»")}</li><li><b>ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆ:</b>${rel.conflict}</li></ul>`);
  html.push(`<h3>ğŸ“Š å€™è£œã‚¹ã‚³ã‚¢</h3><ol>${candidates.slice(0,3).map(c=>`<li>${c.key} (${(c.score*100).toFixed(1)}%)</li>`).join("")}</ol>`);
  html.push(`<h3>ğŸ”’ ä¿¡é ¼åº¦: ${confidence}</h3>`);
  const card=document.getElementById("resultCard");
  card.innerHTML=html.join(""); card.style.display="block";
  card.dataset.share=`ã€é›²äº•é³´è¨ºæ–­ã€‘ã‚¿ã‚¤ãƒ—: ${t.name} (ã‚½ã‚·ã‚ªãƒ‹ã‚¯ã‚¹=${tKey}, ä¿¡é ¼åº¦=${confidence})`;
}

  /* ===================== UIåˆ¶å¾¡ ===================== */
  let current=[], answers={}, lastResult=null;
  function setMode(mode){
    current=(mode==="24")?Q24:Q60;
    document.getElementById("modeLabel").textContent=(mode==="24")?"24å•ç‰ˆï¼ˆæ”¹è‰¯ï¼‰":"60å•ç‰ˆï¼ˆã˜ã£ãã‚Šï¼‰";
    answers={};
    document.getElementById("questionCard").innerHTML=current.map((q,i)=>`
      <div class="q" id="${q.id}">
        <div class="qtitle">Q${i+1}. ${q.text}</div>
        <div class="slider">
          <span>-5</span>
          <input type="range" min="-5" max="5" step="1" value="0" oninput="answers['${q.id}']=Number(this.value);updateProgress()">
          <span>+5</span>
        </div>
      </div>`).join('');
    updateProgress();
  }
  function updateProgress(){
    const answered=Object.keys(answers).length;
    const progress=Math.round((answered/current.length)*100);
    document.getElementById("bar").style.width=progress+"%";
    document.getElementById("count").textContent=`${answered}/${current.length} å›ç­”ï¼ˆ${progress}%ï¼‰`;
  }
  function tryShowResult(){
    const unanswered=current.filter(q=>answers[q.id]===undefined);
    if(unanswered.length>0){
      document.getElementById('warnMsg').textContent=`âš  æœªå›ç­”ãŒã‚ã‚Šã¾ã™ï¼ˆæ®‹ã‚Š ${unanswered.length} å•ï¼‰`;
      return;
    }
    buildResult();
  }
  function copyToClipboard(text){
    navigator.clipboard.writeText(text).then(()=>alert("çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼"))
    .catch(()=>alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ"));
  }
  function init(){
    document.getElementById('mode24').addEventListener('click',()=>setMode('24'));
    document.getElementById('mode60').addEventListener('click',()=>setMode('60'));
    document.getElementById('calcBtn').addEventListener('click', tryShowResult);
    document.getElementById('copyBtn').addEventListener('click',()=>{
      const txt=document.getElementById('resultCard').dataset.share||'';
      if(!txt){alert('ã¾ãšçµæœã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚');return;}
      copyToClipboard(txt);
    });
    setMode('24');
  }
  document.addEventListener('DOMContentLoaded',init);
  </script>
</body>
</html>








